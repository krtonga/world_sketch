<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WORLD SKETCH-TOOL</title>

  <link rel="stylesheet" href="css/styles.css">
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="http://d3js.org/topojson.v1.min.js"></script>
  <script src="js/worldSphere.js"></script>

</head>
<body >
<h2>Playing around with static and interactive globes.</h2>

<script>
  var width = 200,
    height = 200;

  // creates projection, determines type(orth=sphere), translate (pixel coord of center), scale(distance btween proj points, defaults to 150), clipAngle(hides behind), precision(how much can be lost)
  var projection = d3.geo.orthographic()
                     .scale(100)
                     .translate([ width/2, height/2 ])
                     .clipAngle(90)
                     .precision(.1);

  var path = d3.geo.path()
               .projection(projection);

  var graticule = d3.geo.graticule();

  var rotate1 = d3.scale.linear()
                  .domain([0, width])
                  .range([-180, 180]);

  var rotate2 = d3.scale.linear()
                  .domain([0, height])
                  .range([90, -90]);


  // without lines don't appear
  var svg = d3.select("body").append("svg")
              .attr("width", width)
              .attr("height", height);

  // // without this fill and stroke won't appear
  // svg.append("defs").append("path")
  //    .datum({type: "Sphere"})
  //    .attr("id", "sphere")
  //    .attr("d", path);

  // // stroke around
  // svg.append("use")
  //    .attr("class", "stroke")
  //    .attr("xlink:href", "#sphere");

  // // background fill
  // svg.append("use")
  //    .attr("class", "fill")
  //    .attr("xlink:href", "#sphere");

  // lat and long lines. order is for layering.
  svg.append("path")
     .datum(graticule)
     .attr("class", "graticule")
     .attr("d", path);
</script>

<script>
  var width = 200,
    height = 200;

  // creates projection, determines type(orth=sphere), translate (pixel coord of center), scale(distance btween proj points, defaults to 150), clipAngle(hides behind), precision(how much can be lost)
  var projection = d3.geo.orthographic()
                     .scale(100)
                     .translate([ width/2, height/2 ])
                     .clipAngle(90)
                     .precision(.1);

  var path = d3.geo.path()
               .projection(projection);

  var graticule = d3.geo.graticule();

  var rotate1 = d3.scale.linear()
                  .domain([0, width])
                  .range([-180, 180]);

  var rotate2 = d3.scale.linear()
                  .domain([0, height])
                  .range([90, -90]);


  // without lines don't appear
  var svg = d3.select("body").append("svg")
              .attr("width", width)
              .attr("height", height);

  // // without this fill and stroke won't appear
  // svg.append("defs").append("path")
  //    .datum({type: "Sphere"})
  //    .attr("id", "sphere")
  //    .attr("d", path);

  // // stroke around
  // svg.append("use")
  //    .attr("class", "stroke")
  //    .attr("xlink:href", "#sphere");

  // // background fill
  // svg.append("use")
  //    .attr("class", "fill")
  //    .attr("xlink:href", "#sphere");

  // lat and long lines. order is for layering.
  svg.append("path")
     .datum(graticule)
     .attr("class", "graticule")
     .attr("d", path);

  svg.on("mousemove", function() {
    var p = d3.mouse(this);
    projection.rotate([rotate1(p[0]), rotate2(p[1])]);
    svg.selectAll("path").attr("d", path);
  })


  // d3.json("/mbostock/raw/4090846/world-50m.json", function(error, world) {
  //   svg.insert("path", ".graticule")
  //      .datum(topojson.mesh(world, world.objects.countries, function(a, b) {  return a !== b; }))
  //      .attr("class", "boundary")
  //      .attr("d", path);
  // });

  // d3.select(self.frameElement).style("height", height + "px");
</script>

  <!-- <div class="etch-a-sketch"></div> -->
  <div class="globe-container"></div>

</body>
</html>
